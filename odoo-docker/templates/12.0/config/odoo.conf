[options]
# ─────────────────────────────────────────────────────────────
#  PATHS & SECURITY
# ─────────────────────────────────────────────────────────────
addons_path = /mnt/extra-addons,/usr/lib/python3/dist-packages/odoo/addons
data_dir = /var/lib/odoo
admin_passwd = {masterpassword}

# ─────────────────────────────────────────────────────────────
#  WORKERS – CRITICAL FOR STABILITY
# ─────────────────────────────────────────────────────────────
workers = 3                    # 3 workers = perfect balance for 50k–500k skulocation records
max_cron_threads = 1           # only one cron at a time → no overlapping chaos

# ─────────────────────────────────────────────────────────────
#  TIMEOUTS – THIS IS WHAT PREVENTS 100% CPU FOREVER
# ─────────────────────────────────────────────────────────────
limit_time_cpu = 600           # 10 minutes max for normal requests
limit_time_real = 900          # 15 minutes max wall-clock time
limit_time_real_cron = 1800    # 30 minutes max for imports / heavy crons (more than enough)

# ─────────────────────────────────────────────────────────────
#  MEMORY LIMITS – PREVENT OOM AND SWAP THRASHING
# ─────────────────────────────────────────────────────────────
limit_memory_soft = 2147483648   # 2.0 GB
limit_memory_hard = 2684354560     # 2.5 GB

# ─────────────────────────────────────────────────────────────
#  OTHER RECOMMENDED SETTINGS
# ─────────────────────────────────────────────────────────────
db_maxconn = 64
limit_request = 8192
log_level = info
log_handler = :INFO
unaccent = True

# ─────────────────────────────────────────────────────────────
#  COMMENTED LINES YOU CAN KEEP AS REFERENCE
# ─────────────────────────────────────────────────────────────
; csv_internal_sep = ,
; db_name = False
; dbfilter = .*
; debug_mode = False
; email_from = False
; list_db = True
; log_db = False
; logfile = None
; longpolling_port = 8072
; osv_memory_age_limit = 1.0
; osv_memory_count_limit = False
; smtp_server = localhost
; workers = 0                  # ← NEVER use 0 again!
